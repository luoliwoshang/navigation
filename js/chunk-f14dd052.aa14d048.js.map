{"version":3,"sources":["webpack:///./src/views/Test.vue?4544","webpack:///src/views/Test.vue","webpack:///./src/views/Test.vue?dc36","webpack:///./src/views/Test.vue","webpack:///./src/views/Test.vue?2055"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","style","on","$event","shooting","status","_v","attrs","touchstart","shoot","_l","bullet","index","key","left","pos","x","top","y","width","size","height","staticRenderFns","name","data","mouse","prev","con","right","cur","pageX","remove","container","default","speed","plane","nextPos","bullets","shootParam","processing","timer","computed","containerStyle","planeStyle","borderArea","isEdge","isNextEdge","methods","console","log","e","offsetX","window","addEventListener","removeEventListener","plane_move","push","clearTimeout","setInterval","item","mounted","component","QBtn"],"mappings":"gJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,YAAYC,MAAOP,EAAkB,gBAAG,CAACI,EAAG,QAAQ,CAACI,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOT,EAAIU,SAAS,CAAEC,OAAQ,YAAa,CAACX,EAAIY,GAAG,QAAQR,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACE,YAAY,QAAQC,MAAOP,EAAc,WAAEa,MAAM,CAAC,MAAQ,GAAG,MAAQ,UAAU,MAAQ,MAAML,GAAG,CAAC,UAAY,SAASC,GAAQ,OAAOT,EAAIc,WAAWL,IAAS,MAAQT,EAAIe,SAASf,EAAIgB,GAAIhB,EAAW,SAAE,SAASiB,EAAOC,GAAO,OAAOd,EAAG,MAAM,CAACe,IAAID,EAAMZ,YAAY,SAASC,MAAM,CACriBa,KAAMH,EAAOI,IAAIC,EAAI,KACrBC,IAAKN,EAAOI,IAAIG,EAAI,KACpBC,MAAOR,EAAOS,KAAKD,MAAQ,KAC3BE,OAAQV,EAAOS,KAAKC,OAAS,OAC3B,CAAC3B,EAAIY,GAAG,aAAY,IAAI,IAC9BgB,EAAkB,G,YCyBtB,G,UAAA,CACEC,KAAM,QACNC,KAFF,WAGI,MAAO,CACLC,MAAO,CACLC,KAAM,CAAd,SAGQC,IAAK,CACHb,KAAM,EACNc,MAAO,GAETC,IAAK,CACHC,MAAO,GAETC,OAAQ,CACNf,EAAG,IAGPgB,UAAW,CACTjB,IAAK,CACHD,KAAM,GACNG,IAAK,IAEPG,KAAM,CACJD,MAAO,IACPE,OAAQ,MAIZY,QAAS,CACPtB,OAAQ,CACNI,IAAK,CAEHC,EAAG,EACHE,EAAG,GAELE,KAAM,CACJD,MAAO,GACPE,OAAQ,IAGVa,MAAO,KAGXC,MAAO,CACLpB,IAAK,CACHC,EAAG,GAELoB,QAAS,CACPpB,EAAG,GAELI,KAAM,CACJD,MAAO,GACPE,OAAQ,KAGZgB,QAAS,GACTC,WAAY,CACVC,YAAY,EACZC,MAAO,MAIbC,SAAU,CAERC,eAFJ,WAGM,MAAO,CACL5B,KAAMnB,KAAKqC,UAAUjB,IAAID,KAAO,KAChCG,IAAKtB,KAAKqC,UAAUjB,IAAIE,IAAM,KAC9BE,MAAOxB,KAAKqC,UAAUZ,KAAKD,MAAQ,KACnCE,OAAQ1B,KAAKqC,UAAUZ,KAAKC,OAAS,OAGzCsB,WAVJ,WAWM,MAAO,CACL7B,KAAMnB,KAAKwC,MAAMpB,IAAIC,EAAI,KACzBG,MAAOxB,KAAKwC,MAAMf,KAAKD,MAAQ,KAC/BE,OAAQ1B,KAAKwC,MAAMf,KAAKC,OAAS,OAGrCuB,WAjBJ,WAkBM,MAAO,CACL9B,KAAMnB,KAAKqC,UAAUjB,IAAID,KACzBc,MAAOjC,KAAKqC,UAAUjB,IAAID,KAAOnB,KAAKqC,UAAUZ,KAAKD,QAGzD0B,OAvBJ,WAwBM,OACN,gEACA,uBAGIC,WA7BJ,WA8BM,OACN,sBACA,qBACA,yBACA,iDAIEC,QAAS,CACPvC,WADJ,SACA,cACMwC,QAAQC,IAAIC,EAAEC,SACdxD,KAAK8B,MAAME,IAAIb,KAAOoC,EAAEC,QACxBxD,KAAK8B,MAAME,IAAIC,MAAQjC,KAAKwC,MAAMf,KAAKD,MAAQ+B,EAAEC,QACjDxD,KAAK8B,MAAMC,KAAKI,MAAQoB,EAAEpB,MAChC,qDAEMsB,OAAOC,iBAAiB,WAAW,SAAzC,GACQD,OAAOE,oBAAoB,YAAa,EAAhD,gBAIIC,WAbJ,SAaA,GAEM5D,KAAK8B,MAAMM,OAAOf,EAAIkC,EAAEpB,MAAQnC,KAAK8B,MAAMC,KAAKI,MAChDnC,KAAK8B,MAAMC,KAAKI,MAAQoB,EAAEpB,MAC1BnC,KAAKwC,MAAMC,QAAQpB,GAAKrB,KAAK8B,MAAMM,OAAOf,EAC1CrB,KAAKwC,MAAMpB,IAAIC,EAAIrB,KAAKmD,WAC9B,iBACA,sBAKIrC,MAzBJ,WA0BMuC,QAAQC,IAAI,OAAlB,OAAkB,CAAlB,kBACA,qBADA,IAEQlC,IAAK,CAAb,+CAGMpB,KAAK0C,QAAQmB,KAAK,OAAxB,OAAwB,CAAxB,kBACA,qBADA,IAEQzC,IAAK,CACHC,EACV,iBACA,wBACA,iCACUE,EACV,2BACA,uBACA,oCAGMvB,KAAKS,SAAS,CAApB,kBAEIA,SA9CJ,YA8CA,sBACqB,UAAXC,GAAuBV,KAAK2C,WAAWE,MAYjD,aACQiB,aAAa9D,KAAK2C,WAAWE,OAC7B7C,KAAK2C,WAAWE,MAAQ,MAZxB7C,KAAK2C,WAAWE,MAAQkB,aAAY,WAElC,EAAV,yBAEY,OADAC,EAAK5C,IAAIG,IAAM,EAA3B,qBACmByC,OAKnB,OAOEC,QAvKF,eC/Bue,I,yDCQneC,EAAY,eACd,EACApE,EACA6B,GACA,EACA,KACA,WACA,MAIa,aAAAuC,EAAiB,QAGhC,IAASA,EAAW,aAAc,CAACC,OAAA,Q,kCCtBnC","file":"js/chunk-f14dd052.aa14d048.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\",style:(_vm.containerStyle)},[_c('q-btn',{on:{\"click\":function($event){return _vm.shooting({ status: 'stop' })}}},[_vm._v(\"暂停\")]),_c('div',[_c('q-btn',{staticClass:\"plane\",style:(_vm.planeStyle),attrs:{\"round\":\"\",\"color\":\"primary\",\"label\":\"11\"},on:{\"mousedown\":function($event){return _vm.touchstart($event)},\"click\":_vm.shoot}}),_vm._l((_vm.bullets),function(bullet,index){return _c('div',{key:index,staticClass:\"bullet\",style:({\n        left: bullet.pos.x + 'px',\n        top: bullet.pos.y + 'px',\n        width: bullet.size.width + 'px',\n        height: bullet.size.height + 'px',\n      })},[_vm._v(\" 0 \")])})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\" :style=\"containerStyle\">\r\n    <q-btn @click=\"shooting({ status: 'stop' })\">暂停</q-btn>\r\n    <div>\r\n      <q-btn\r\n        class=\"plane\"\r\n        :style=\"planeStyle\"\r\n        @mousedown=\"touchstart($event)\"\r\n        round\r\n        color=\"primary\"\r\n        label=\"11\"\r\n        @click=\"shoot\"\r\n      />\r\n      <div\r\n        class=\"bullet\"\r\n        v-for=\"(bullet, index) in bullets\"\r\n        :key=\"index\"\r\n        :style=\"{\r\n          left: bullet.pos.x + 'px',\r\n          top: bullet.pos.y + 'px',\r\n          width: bullet.size.width + 'px',\r\n          height: bullet.size.height + 'px',\r\n        }\"\r\n      >\r\n        0\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"plane\",\r\n  data() {\r\n    return {\r\n      mouse: {\r\n        prev: { pageX: 0 }, //上次事件滑动距离\r\n\r\n        // 鼠标离plane容器的距离\r\n        con: {\r\n          left: 0,\r\n          right: 0,\r\n        },\r\n        cur: {\r\n          pageX: 0,\r\n        },\r\n        remove: {\r\n          x: 0,\r\n        },\r\n      },\r\n      container: {\r\n        pos: {\r\n          left: 50,\r\n          top: 50,\r\n        },\r\n        size: {\r\n          width: 200,\r\n          height: 400,\r\n        },\r\n      },\r\n      // 默认初始值\r\n      default: {\r\n        bullet: {\r\n          pos: {\r\n            // 相对于容器\r\n            x: 0,\r\n            y: 0,\r\n          },\r\n          size: {\r\n            width: 30,\r\n            height: 30,\r\n          },\r\n          // 子弹\r\n          speed: 10,\r\n        },\r\n      },\r\n      plane: {\r\n        pos: {\r\n          x: 0,\r\n        },\r\n        nextPos: {\r\n          x: 0,\r\n        },\r\n        size: {\r\n          width: 50,\r\n          height: 50,\r\n        },\r\n      },\r\n      bullets: [],\r\n      shootParam: {\r\n        processing: false, //是否进行中\r\n        timer: \"\", //定时器，保存interval开始与关闭\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    // 容器样式\r\n    containerStyle() {\r\n      return {\r\n        left: this.container.pos.left + \"px\",\r\n        top: this.container.pos.top + \"px\",\r\n        width: this.container.size.width + \"px\",\r\n        height: this.container.size.height + \"px\",\r\n      };\r\n    },\r\n    planeStyle() {\r\n      return {\r\n        left: this.plane.pos.x + \"px\",\r\n        width: this.plane.size.width + \"px\",\r\n        height: this.plane.size.height + \"px\",\r\n      };\r\n    },\r\n    borderArea() {\r\n      return {\r\n        left: this.container.pos.left,\r\n        right: this.container.pos.left + this.container.size.width,\r\n      };\r\n    },\r\n    isEdge() {\r\n      return (\r\n        this.plane.size.width + this.plane.pos.x + this.container.pos.left >=\r\n        this.borderArea.right\r\n      );\r\n    },\r\n    isNextEdge() {\r\n      return (\r\n        this.plane.size.width +\r\n          this.plane.nextPos.x +\r\n          this.container.pos.left >=\r\n          this.borderArea.right || this.plane.nextPos.x <= 0\r\n      );\r\n    },\r\n  },\r\n  methods: {\r\n    touchstart(e) {\r\n      console.log(e.offsetX);\r\n      this.mouse.con.left = e.offsetX;\r\n      this.mouse.con.right = this.plane.size.width - e.offsetX;\r\n      this.mouse.prev.pageX = e.pageX; //设置一开始的距离\r\n      let move = window.addEventListener(\"mousemove\", this.plane_move);\r\n      // 抬起时注销事件\r\n      window.addEventListener(\"mouseup\", (e) => {\r\n        window.removeEventListener(\"mousemove\", this.plane_move);\r\n      });\r\n    },\r\n    // 开始移动\r\n    plane_move(e) {\r\n      //判断下一次移动是否接触边界\r\n      this.mouse.remove.x = e.pageX - this.mouse.prev.pageX; //设置移动的x距离\r\n      this.mouse.prev.pageX = e.pageX; //设置下一次相对的开始位置\r\n      this.plane.nextPos.x += this.mouse.remove.x; //将要移动到的距离\r\n      this.plane.pos.x = this.isNextEdge\r\n        ? this.plane.pos.x\r\n        : this.plane.nextPos.x;\r\n      // if (!this.isNextEdge) {\r\n      //   this.plane.pos.x = this.plane.nextPos.x;\r\n      // }\r\n    },\r\n    shoot() {\r\n      console.log({\r\n        ...this.default.bullet,\r\n        pos: { x: this.plane.pos.x + this.plane.size.width / 2 },\r\n      });\r\n      // 添加一颗\r\n      this.bullets.push({\r\n        ...this.default.bullet,\r\n        pos: {\r\n          x:\r\n            this.plane.pos.x +\r\n            this.plane.size.width / 2 -\r\n            this.default.bullet.size.width / 2,\r\n          y:\r\n            this.container.size.height -\r\n            this.plane.size.height -\r\n            this.default.bullet.size.height,\r\n        },\r\n      });\r\n      this.shooting({ status: \"start\" }); //开始shooting\r\n    },\r\n    shooting({ status }) {\r\n      if (status === \"start\" && !this.shootParam.timer) {\r\n        // 只有第一次启动时才会添加定时器\r\n        this.shootParam.timer = setInterval(() => {\r\n          // 设置位移，且删除\r\n          this.bullets.map((item) => {\r\n            item.pos.y += -this.default.bullet.speed;\r\n            return item;\r\n          });\r\n          // this.bullets.forEach((item) => {\r\n          //   item.pos.y += -this.default.bullet.speed;\r\n          // });\r\n        }, 100);\r\n      } else if (status === \"stop\") {\r\n        clearTimeout(this.shootParam.timer);\r\n        this.shootParam.timer = null;\r\n      }\r\n    },\r\n  },\r\n  mounted() {},\r\n};\r\n</script>\r\n<style lang=\"stylus\" scoped>\r\n.container {\r\n  position: relative;\r\n  border: 1px solid red;\r\n\r\n  .plane {\r\n    cursor: pointer;\r\n    position: absolute;\r\n    bottom: 0;\r\n    background-color: cyan;\r\n  }\r\n\r\n  .bullet {\r\n    position: absolute;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 50%;\r\n    background-color: lightblue;\r\n    color: cyan;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Test.vue?vue&type=template&id=410c7e08&scoped=true&\"\nimport script from \"./Test.vue?vue&type=script&lang=js&\"\nexport * from \"./Test.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Test.vue?vue&type=style&index=0&id=410c7e08&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"410c7e08\",\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Test.vue?vue&type=style&index=0&id=410c7e08&lang=stylus&scoped=true&\""],"sourceRoot":""}